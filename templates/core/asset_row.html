{% load evewire %}

<tr class="asset-row"
    data-asset-id="{{ asset.item_id }}"
    data-has-children="{{ asset.child_count|yesno:'true,false' }}"
    data-child-count="{{ asset.child_count|default:0 }}"
    data-children-loaded="false">
    <td>
        <div class="asset-item-name">
            {% if asset.child_count > 0 %}
                <span class="asset-expand"
                      data-asset-id="{{ asset.item_id }}"
                      onclick="lazyLoadChildren(this)">
                    &#9654;
                </span>
                <span class="child-count-badge">({{ asset.child_count }})</span>
            {% else %}
                <span style="width: 16px; display: inline-block;"></span>
            {% endif %}
            <span class="asset-name{% if indent > 0 %} asset-indent-{{ indent }}{% endif %}">
                {{ asset.type_name }}
            </span>
            {% if asset.is_blueprint_copy %}
                <span class="blueprint-badge blueprint-bpc">BPC</span>
            {% endif %}
            {% if asset.is_singleton %}
                <span class="singleton-badge">Assembled</span>
            {% endif %}
        </div>
    </td>
    {% if is_account_wide %}
    <td>
        <a href="{% url 'core:character_overview' asset.character_id %}" style="font-size: 0.85rem; color: var(--link-color);">
            {{ asset.character.character_name }}
        </a>
    </td>
    {% endif %}
    <td style="color: var(--text-secondary); font-size: 0.85rem;">
        {{ asset.type_id }}
    </td>
    <td style="color: var(--text-secondary); font-size: 0.85rem;">
        {{ asset.location_flag|default:"&mdash;" }}
    </td>
    <td style="text-align: right;">
        {{ asset.quantity|default:1 }}
    </td>
    <td style="color: var(--text-secondary); font-size: 0.85rem;">
        {{ asset.location_name }}
    </td>
    <td>
        {% if asset.is_singleton %}
            <span style="color: #0066cc;">&#10003;</span>
        {% else %}
            <span style="color: var(--text-secondary);">&mdash;</span>
        {% endif %}
    </td>
</tr>

<!-- Children will be loaded via AJAX and inserted here -->
<tbody class="asset-children-container" id="asset-children-{{ asset.item_id }}" style="display: none;">
</tbody>
