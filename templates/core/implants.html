{% extends "base.html" %}
{% load evewire %}

{% block title %}Implants - {{ character.name }} - evewire{% endblock %}

{% block content %}
<h1>Implants - {{ character.name }}</h1>

<div style="margin-bottom: 1rem;">
    <a href="{% url 'core:skills_list' %}" class="btn">Back to Skills</a>
</div>

<div class="card">
    <h2>Installed Implants ({{ implants|length }}/{{ total_slots }})</h2>

    {% if implants %}
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="border-bottom: 2px solid var(--border-color);">
                <th style="padding: 0.75rem; text-align: left;">Slot</th>
                <th style="padding: 0.75rem; text-align: left;">Implant Name</th>
                <th style="padding: 0.75rem; text-align: left;">Type ID</th>
            </tr>
        </thead>
        <tbody>
            {% for implant in implants %}
            <tr style="border-bottom: 1px solid var(--table-border);">
                <td style="padding: 0.75rem;">
                    <span style="display: inline-block; width: 30px; height: 30px; line-height: 30px; text-align: center; background: var(--bg-secondary); border-radius: 50%;">
                        {{ implant.slot }}
                    </span>
                </td>
                <td style="padding: 0.75rem; font-weight: 600;">{{ implant.name }}</td>
                <td style="padding: 0.75rem; font-family: monospace; color: var(--text-secondary);">{{ implant.type_id }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% if empty_slots %}
    <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
        <h3 style="font-size: 1rem;">Empty Slots</h3>
        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
            {% for slot in empty_slots %}
            <span style="display: inline-block; width: 30px; height: 30px; line-height: 30px; text-align: center; background: var(--bg-secondary); border-radius: 50%; color: var(--text-secondary);">
                {{ slot }}
            </span>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    {% else %}
    <p style="color: var(--text-secondary);">No implants installed. All {{ total_slots }} implant slots are empty.</p>
    {% endif %}
</div>

<div class="card">
    <h3>Implant Slots Reference</h3>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
        <div style="padding: 0.75rem; background: var(--bg-secondary); border-radius: 4px;">
            <strong>Slots 1-5:</strong> Attribute implants
            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.25rem;">
                Slot 1: Intelligence | Slot 2: Perception | Slot 3: Charisma<br>
                Slot 4: Willpower | Slot 5: Memory
            </div>
        </div>
        <div style="padding: 0.75rem; background: var(--bg-secondary); border-radius: 4px;">
            <strong>Slots 6-10:</strong> Limited implants
            <div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.25rem;">
                Limited Ocular, Limited Cybernetic, Limited Neural,<br>
                Limited Hardwiring, Limited Mental
            </div>
        </div>
    </div>
</div>
{% endblock %}
